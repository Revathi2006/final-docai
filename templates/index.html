<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>DOC AI</title> 
    <link 
href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&
display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font
awesome/6.4.0/css/all.min.css"> 
    <style> 
        :root { 
            --primary: #6c5ce7; 
            --secondary: #a29bfe; 
            --dark: #2d3436; 
            --light: #f5f6fa; 
            --success: #00b894; 
            --warning: #fdcb6e; 
            --danger: #d63031; 
            --card-bg: rgba(255, 255, 255, 0.9); 
            --glass-eAect: rgba(255, 255, 255, 0.25); 
        } 
 
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        } 
 
        body { 
            font-family: 'Poppins', sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh; 
            color: var(--dark); 
            overflow-x: hidden; 
        } 
 
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 2rem; 
        } 
 
        header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 2rem; 
            animation: fadeInDown 0.8s ease-out; 
        } 
 
        .logo { 
            display: flex; 
            align-items: center; 
            gap: 0.5rem; 
            color: white; 
            font-size: 1.8rem; 
            font-weight: 700; 
        } 
 
        .logo i { 
            color: var(--warning); 
        } 
 
        .nav-links { 
            display: flex; 
            gap: 1.5rem; 
        } 
 
        .nav-link { 
            color: white; 
            text-decoration: none; 
            font-weight: 500; 
            padding: 0.5rem 1rem; 
            border-radius: 50px; 
            transition: all 0.3s ease; 
            position: relative; 
        } 
 
        .nav-link:hover { 
            background: rgba(255, 255, 255, 0.2); 
        } 
 
        .nav-link.active { 
            background: white; 
            color: var(--primary); 
        } 
 
        .main-content { 
            display: grid; 
            grid-template-columns: 1fr; 
            gap: 2rem; 
            margin-top: 2rem; 
        } 
 
        .card { 
            background: var(--card-bg); 
            border-radius: 20px; 
            padding: 2rem; 
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1); 
            backdrop-filter: blur(10px); 
            border: 1px solid var(--glass-eAect); 
            transition: transform 0.3s ease, box-shadow 0.3s ease; 
            animation: fadeInUp 0.6s ease-out; 
        } 
 
        #upload-card { 
            max-width: 600px; 
            margin: 0 auto; 
            width: 100%; 
        } 
 
        .card:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15); 
        } 
 
        .card-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 1.5rem; 
        } 
 
        .card-title { 
            font-size: 1.5rem; 
            font-weight: 600; 
            color: var(--primary); 
        } 
 
        .card-icon { 
            font-size: 2rem; 
            color: var(--primary); 
        } 
 
        .upload-area { 
            border: 2px dashed var(--secondary); 
            border-radius: 15px; 
            padding: 3rem 2rem; 
            text-align: center; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            margin-bottom: 1.5rem; 
            position: relative; 
            overflow: hidden; 
        } 
 
        .upload-area:hover { 
            border-color: var(--primary); 
            background: rgba(108, 92, 231, 0.05); 
        } 
 
        .upload-area i { 
            font-size: 3rem; 
            color: var(--primary); 
            margin-bottom: 1rem; 
        } 
 
        .upload-area h3 { 
            margin-bottom: 0.5rem; 
            color: var(--dark); 
        } 
 
        .upload-area p { 
            color: #666; 
            font-size: 0.9rem; 
        } 
 
        #file-input { 
            display: none; 
        } 
 
        .btn { 
            background: var(--primary); 
            color: white; 
            border: none; 
            padding: 0.8rem 1.5rem; 
            border-radius: 50px; 
            font-weight: 500; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            display: inline-flex; 
            align-items: center; 
            gap: 0.5rem; 
            font-size: 1rem; 
        } 
 
        .btn:hover { 
            background: #5649c0; 
            transform: translateY(-2px); 
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3); 
        } 
 
        .btn-outline { 
            background: transparent; 
            border: 2px solid var(--primary); 
            color: var(--primary); 
        } 
 
        .btn-outline:hover { 
            background: var(--primary); 
            color: white; 
        } 
 
        .back-btn { 
            margin-bottom: 1.5rem; 
            background: var(--secondary); 
        } 
 
        .back-btn:hover { 
            background: #8c7ae6; 
        } 
 
        .form-group { 
            margin-bottom: 1.5rem; 
        } 
 
        .form-label { 
            display: block; 
            margin-bottom: 0.5rem; 
            font-weight: 500; 
        } 
 
        .form-control { 
            width: 100%; 
            padding: 0.8rem 1rem; 
            border-radius: 10px; 
            border: 1px solid #ddd; 
            font-family: inherit; 
            font-size: 1rem; 
            transition: all 0.3s ease; 
        } 
 
        .form-control:focus { 
            outline: none; 
            border-color: var(--primary); 
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2); 
        } 
 
        .result-container { 
            max-height: 400px; 
            overflow-y: auto; 
            padding-right: 1rem; 
        } 
 
        .result-item { 
            background: white; 
            border-radius: 10px; 
            padding: 1.5rem; 
            margin-bottom: 1rem; 
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); 
            transition: all 0.3s ease; 
            border-left: 4px solid var(--primary); 
        } 
 
        .result-item:hover { 
            transform: translateX(5px); 
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); 
        } 
 
        .result-meta { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 0.5rem; 
            font-size: 0.9rem; 
            color: #666; 
        } 
 
        .result-content { 
            line-height: 1.6; 
        } 
 
        .feature-card { 
            grid-column: span 1; 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 1.5rem; 
        } 
 
        .feature-item { 
            background: var(--card-bg); 
            border-radius: 15px; 
            padding: 1.5rem; 
            text-align: center; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            border: 1px solid var(--glass-eAect); 
        } 
 
        .feature-item:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); 
            background: white; 
        } 
 
        .feature-icon { 
            font-size: 2.5rem; 
            color: var(--primary); 
            margin-bottom: 1rem; 
        } 
 
        .feature-title { 
            font-weight: 600; 
            margin-bottom: 0.5rem; 
        } 
 
        .feature-desc { 
            font-size: 0.9rem; 
            color: #666; 
        } 
 
        .modal { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0, 0, 0, 0.7); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            z-index: 1000; 
            opacity: 0; 
            visibility: hidden; 
            transition: all 0.3s ease; 
        } 
 
        .modal.active { 
            opacity: 1; 
            visibility: visible; 
        } 
 
        .modal-content { 
            background: white; 
            border-radius: 20px; 
            width: 90%; 
            max-width: 800px; 
            max-height: 90vh; 
            overflow-y: auto; 
            padding: 2rem; 
            position: relative; 
            transform: translateY(20px); 
            transition: all 0.3s ease; 
        } 
 
        .modal.active .modal-content { 
            transform: translateY(0); 
        } 
 
        .close-modal { 
            position: absolute; 
            top: 1rem; 
            right: 1rem; 
            font-size: 1.5rem; 
            cursor: pointer; 
            color: #666; 
            transition: all 0.3s ease; 
        } 
 
        .close-modal:hover { 
            color: var(--danger); 
            transform: rotate(90deg); 
        } 
 
        .tab-container { 
            display: flex; 
            border-bottom: 1px solid #ddd; 
            margin-bottom: 1.5rem; 
        } 
 
        .tab { 
            padding: 0.8rem 1.5rem; 
            cursor: pointer; 
            font-weight: 500; 
            border-bottom: 3px solid transparent; 
            transition: all 0.3s ease; 
        } 
 
        .tab.active { 
            border-bottom: 3px solid var(--primary); 
            color: var(--primary); 
        } 
 
        .tab-content { 
            display: none; 
        } 
 
        .tab-content.active { 
            display: block; 
            animation: fadeIn 0.5s ease; 
        } 
 
        .loading { 
            display: inline-block; 
            width: 20px; 
            height: 20px; 
            border: 3px solid rgba(255, 255, 255, 0.3); 
            border-radius: 50%; 
            border-top-color: white; 
            animation: spin 1s ease-in-out infinite; 
        } 
 
        @keyframes spin { 
            to { transform: rotate(360deg); } 
        } 
 
        @keyframes fadeIn { 
            from { opacity: 0; } 
            to { opacity: 1; } 
        } 
 
        @keyframes fadeInUp { 
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            } 
            to { 
                opacity: 1; 
                transform: translateY(0); 
            } 
        } 
 
        @keyframes fadeInDown { 
            from { 
                opacity: 0; 
                transform: translateY(-20px); 
            } 
            to { 
                opacity: 1; 
                transform: translateY(0); 
            } 
        } 
 
        .pulse { 
            animation: pulse 2s infinite; 
        } 
 
        @keyframes pulse { 
            0% { 
                box-shadow: 0 0 0 0 rgba(108, 92, 231, 0.4); 
            } 
            70% { 
                box-shadow: 0 0 0 15px rgba(108, 92, 231, 0); 
            } 
            100% { 
                box-shadow: 0 0 0 0 rgba(108, 92, 231, 0); 
            } 
        } 
 
        .floating { 
            animation: floating 3s ease-in-out infinite; 
        } 
 
        @keyframes floating { 
            0% { transform: translateY(0px); } 
            50% { transform: translateY(-10px); } 
            100% { transform: translateY(0px); } 
        } 
 
        /* Responsive styles */ 
        @media (max-width: 768px) { 
            .main-content { 
                grid-template-columns: 1fr; 
            } 
             
            .feature-card { 
                grid-template-columns: 1fr; 
            } 
             
            header { 
                flex-direction: column; 
                gap: 1rem; 
            } 
             
            .nav-links { 
                flex-wrap: wrap; 
                justify-content: center; 
            } 
        } 
 
        /* Custom scrollbar */ 
        ::-webkit-scrollbar { 
            width: 8px; 
        } 
 
        ::-webkit-scrollbar-track { 
            background: #f1f1f1; 
            border-radius: 10px; 
        } 
 
        ::-webkit-scrollbar-thumb { 
            background: var(--primary); 
            border-radius: 10px; 
        } 
 
        ::-webkit-scrollbar-thumb:hover { 
            background: #5649c0; 
        } 
    </style> 
</head> 
<body> 
    <div class="container"> 
        <header> 
            <div class="logo"> 
                <i class="fas fa-brain"></i> 
                <span>DOC AI</span> 
            </div> 
            <div class="nav-links"> 
                <a href="#" class="nav-link active" data-tab="upload">Upload</a> 
                <a href="#" class="nav-link" data-tab="ask">Ask Question</a> 
                <a href="#" class="nav-link" data-tab="dictionary">Dictionary</a> 
                <a href="#" class="nav-link" data-tab="summarize">Summarize</a> 
            </div> 
        </header> 
 
        <div class="main-content"> 
            <!-- Upload Card --> 
            <div class="card" id="upload-card"> 
                <div class="card-header"> 
                    <h2 class="card-title">Upload PDF</h2> 
                    <i class="fas fa-cloud-upload-alt card-icon floating"></i> 
                </div> 
                <div class="upload-area" id="upload-area"> 
                    <i class="fas fa-file-pdf pulse"></i> 
                    <h3>Drag & Drop your PDF here</h3> 
                    <p>or click to browse files</p> 
                    <input type="file" id="file-input" accept=".pdf"> 
                </div> 
                <button class="btn" id="upload-btn" disabled> 
                    <i class="fas fa-upload"></i> Upload Document 
                </button> 
                <div id="upload-status" style="margin-top: 1rem;"></div> 
            </div> 
 
            <!-- Feature Cards --> 
            <div class="card feature-card" id="features-card"> 
                <div class="feature-item" data-feature="upload"> 
                    <div class="feature-icon"> 
                        <i class="fas fa-cloud-upload-alt"></i> 
                    </div> 
                    <h3 class="feature-title">Upload PDFs</h3> 
                    <p class="feature-desc">Upload your academic papers, research documents 
or technical manuals</p> 
                </div> 
                <div class="feature-item" data-feature="ask"> 
                    <div class="feature-icon"> 
                        <i class="fas fa-question"></i> 
                    </div> 
                    <h3 class="feature-title">Ask Questions</h3> 
                    <p class="feature-desc">Get instant answers from your documents with AI
powered search</p> 
                </div> 
                <div class="feature-item" data-feature="dictionary"> 
                    <div class="feature-icon"> 
                        <i class="fas fa-book"></i> 
                    </div> 
                    <h3 class="feature-title">Dictionary</h3> 
                    <p class="feature-desc">Look up terms with our specialized dictionary</p> 
                </div> 
            </div> 
 
            <!-- Ask Question Card --> 
            <div class="card" id="ask-card" style="display: none;"> 
                <button class="btn back-btn" id="ask-back-btn"> 
                    <i class="fas fa-arrow-left"></i> Back to Upload 
                </button> 
                <div class="card-header"> 
                    <h2 class="card-title">Ask Question</h2> 
                    <i class="fas fa-question-circle card-icon"></i> 
                </div> 
                <div class="form-group"> 
                    <label for="question" class="form-label">Your Question</label> 
                    <input type="text" id="question" class="form-control" placeholder="What 
would you like to know?"> 
                </div> 
                <div class="form-group"> 
                    <label for="file-select" class="form-label">Select PDF</label> 
                    <select id="file-select" class="form-control"> 
                        <option value="">Select a file...</option> 
                    </select> 
                </div> 
                <button class="btn" id="ask-btn"> 
                    <i class="fas fa-search"></i> Find Answer 
                </button> 
                <div class="result-container" id="ask-results" style="margin-top: 
1.5rem;"></div> 
            </div> 
 
            <!-- Dictionary Card --> 
            <div class="card" id="dictionary-card" style="display: none;"> 
                <button class="btn back-btn" id="dictionary-back-btn"> 
                    <i class="fas fa-arrow-left"></i> Back to Upload 
                </button> 
                <div class="card-header"> 
                    <h2 class="card-title">Dictionary</h2> 
                    <i class="fas fa-book card-icon"></i> 
                </div> 
                <div class="form-group"> 
                    <label for="dictionary-word" class="form-label">Search Term</label> 
                    <input type="text" id="dictionary-word" class="form-control" 
placeholder="Enter a term..."> 
                </div> 
                <button class="btn" id="dictionary-btn"> 
                    <i class="fas fa-search"></i> Look Up 
                </button> 
                <div class="result-container" id="dictionary-results" style="margin-top: 
1.5rem;"></div> 
            </div> 
 
            <!-- Summarize Card --> 
            <div class="card" id="summarize-card" style="display: none;"> 
                <button class="btn back-btn" id="summarize-back-btn"> 
                    <i class="fas fa-arrow-left"></i> Back to Upload 
                </button> 
                <div class="card-header"> 
                    <h2 class="card-title">Summarize PDF</h2> 
                    <i class="fas fa-file-contract card-icon"></i> 
                </div> 
                <div class="form-group"> 
                    <label for="summarize-file-select" class="form-label">Select PDF</label> 
                    <select id="summarize-file-select" class="form-control"> 
                        <option value="">Select a file...</option> 
                    </select> 
                </div> 
                <button class="btn" id="summarize-btn"> 
                    <i class="fas fa-scroll"></i> Generate Summary 
                </button> 
                <div class="result-container" id="summarize-results" style="margin-top: 
1.5rem;"></div> 
            </div> 
        </div> 
    </div> 
 
    <!-- Modal for detailed view --> 
    <div class="modal" id="result-modal"> 
        <div class="modal-content"> 
            <span class="close-modal">&times;</span> 
            <div class="tab-container"> 
                <div class="tab active" data-tab="content">Content</div> 
                <div class="tab" data-tab="metadata">Metadata</div> 
            </div> 
            <div class="tab-content active" id="content-tab"> 
                <div id="modal-content"></div> 
            </div> 
            <div class="tab-content" id="metadata-tab"> 
                <div id="modal-metadata"></div> 
            </div> 
        </div> 
    </div> 
 
    <script> 
        document.addEventListener('DOMContentLoaded', function() { 
            // Tab navigation 
            const navLinks = document.querySelectorAll('.nav-link'); 
            const cards = { 
                'upload': document.getElementById('upload-card'), 
                'ask': document.getElementById('ask-card'), 
                'dictionary': document.getElementById('dictionary-card'), 
                'summarize': document.getElementById('summarize-card') 
            }; 
 
            navLinks.forEach(link => { 
                link.addEventListener('click', function(e) { 
                    e.preventDefault(); 
                    const tab = this.getAttribute('data-tab'); 
                     
                    // Update active nav link 
                    navLinks.forEach(nl => nl.classList.remove('active')); 
                    this.classList.add('active'); 
                     
                    // Show corresponding card 
                    Object.values(cards).forEach(card => card.style.display = 'none'); 
                    if (cards[tab]) { 
                        cards[tab].style.display = 'block'; 
                    } 
                     
                    // Special case for feature card 
                    document.getElementById('features-card').style.display = tab === 'upload' ? 
'grid' : 'none'; 
                     
                    // Load file list when switching to ask or summarize tabs 
                    if (tab === 'ask' || tab === 'summarize') { 
                        loadFileList(); 
                    } 
                }); 
            }); 
 
            // Back buttons 
            document.getElementById('ask-back-btn').addEventListener('click', () => { 
                document.querySelector('.nav-link[data-tab="upload"]').click(); 
            }); 
             
            document.getElementById('dictionary-back-btn').addEventListener('click', () => { 
                document.querySelector('.nav-link[data-tab="upload"]').click(); 
            }); 
             
            document.getElementById('summarize-back-btn').addEventListener('click', () => { 
                document.querySelector('.nav-link[data-tab="upload"]').click(); 
            }); 
 
            // Feature card navigation 
            const featureItems = document.querySelectorAll('.feature-item'); 
            featureItems.forEach(item => { 
                item.addEventListener('click', function() { 
                    const feature = this.getAttribute('data-feature'); 
                    navLinks.forEach(nl => { 
                        if (nl.getAttribute('data-tab') === feature) { 
                            nl.click(); 
                        } 
                    }); 
                }); 
            }); 
 
            // File upload handling 
            const uploadArea = document.getElementById('upload-area'); 
            const fileInput = document.getElementById('file-input'); 
            const uploadBtn = document.getElementById('upload-btn'); 
            const uploadStatus = document.getElementById('upload-status'); 
            let selectedFile = null; 
 
            uploadArea.addEventListener('click', () => fileInput.click()); 
             
            uploadArea.addEventListener('dragover', (e) => { 
                e.preventDefault(); 
                uploadArea.style.borderColor = 'var(--primary)'; 
                uploadArea.style.backgroundColor = 'rgba(108, 92, 231, 0.1)'; 
            }); 
             
            uploadArea.addEventListener('dragleave', () => { 
                uploadArea.style.borderColor = 'var(--secondary)'; 
                uploadArea.style.backgroundColor = 'transparent'; 
            }); 
             
            uploadArea.addEventListener('drop', (e) => { 
                e.preventDefault(); 
                uploadArea.style.borderColor = 'var(--secondary)'; 
                uploadArea.style.backgroundColor = 'transparent'; 
                 
                if (e.dataTransfer.files.length) { 
                    handleFileSelect(e.dataTransfer.files[0]); 
                } 
            }); 
             
            fileInput.addEventListener('change', () => { 
                if (fileInput.files.length) { 
                    handleFileSelect(fileInput.files[0]); 
                } 
            }); 
             
            function handleFileSelect(file) { 
                if (file.type !== 'application/pdf') { 
                    showAlert('Please select a PDF file', 'danger'); 
                    return; 
                } 
                 
                selectedFile = file; 
                uploadBtn.disabled = false; 
                 
                // Update UI 
                const uploadIcon = uploadArea.querySelector('i'); 
                uploadIcon.className = 'fas fa-file-pdf'; 
                uploadArea.querySelector('h3').textContent = file.name; 
                uploadArea.querySelector('p').textContent = `${(file.size / 1024 / 
1024).toFixed(2)} MB`; 
                 
                showAlert('File ready for upload', 'success'); 
            } 
             
            uploadBtn.addEventListener('click', async () => { 
                if (!selectedFile) return; 
                 
                try { 
                    uploadBtn.innerHTML = '<div class="loading"></div> Uploading...'; 
                    uploadBtn.disabled = true; 
                     
                    const formData = new FormData(); 
                    formData.append('file', selectedFile); 
                     
                    const response = await fetch('/upload', { 
                        method: 'POST', 
                        body: formData 
                    }); 
                     
                    const data = await response.json(); 
                     
                    if (response.ok) { 
                        showAlert('File uploaded successfully!', 'success'); 
                        updateFileSelects(data.file_id, data.filename); 
                         
                        // Reset upload area 
                        const uploadArea = document.getElementById('upload-area'); 
                        uploadArea.innerHTML = ` 
                            <i class="fas fa-file-pdf pulse"></i> 
                            <h3>Drag & Drop your PDF here</h3> 
                            <p>or click to browse files</p> 
                            <input type="file" id="file-input" accept=".pdf"> 
                        `; 
                        // Re-add event listeners 
                        const newFileInput = document.getElementById('file-input'); 
                        newFileInput.addEventListener('change', () => { 
                            if (newFileInput.files.length) { 
                                handleFileSelect(newFileInput.files[0]); 
                            } 
                        }); 
                         
                        selectedFile = null; 
                    } else { 
                        throw new Error(data.detail || 'Upload failed'); 
                    } 
                } catch (error) { 
                    showAlert(error.message, 'danger'); 
                } finally { 
                    uploadBtn.innerHTML = '<i class="fas fa-upload"></i> Upload Document'; 
                    uploadBtn.disabled = false; 
                } 
            }); 
             
            async function loadFileList() { 
                try { 
                    const response = await fetch('/files'); 
                    const data = await response.json(); 
                     
                    const selects = [ 
                        document.getElementById('file-select'), 
                        document.getElementById('summarize-file-select') 
                    ]; 
                     
                    selects.forEach(select => { 
                        // Clear existing options except the first one 
                        while (select.options.length > 1) { 
                            select.remove(1); 
                        } 
                         
                        // Add files from server 
                        if (data.files && data.files.length > 0) { 
                            data.files.forEach(file => { 
                                const option = document.createElement('option'); 
                                option.value = file.id; 
                                option.textContent = file.name; 
                                select.appendChild(option); 
                            }); 
                        } else { 
                            const option = document.createElement('option'); 
                            option.value = ''; 
                            option.textContent = 'No files uploaded yet'; 
                            option.disabled = true; 
                            select.appendChild(option); 
                        } 
                    }); 
                } catch (error) { 
                    console.error('Failed to load file list:', error); 
                    showAlert('Failed to load file list', 'danger'); 
                } 
            } 
             
            function updateFileSelects(fileId, fileName) { 
                const selects = [ 
                    document.getElementById('file-select'), 
                    document.getElementById('summarize-file-select') 
                ]; 
                 
                selects.forEach(select => { 
                    // Remove "no files" message if present 
                    if (select.options.length === 1 && select.options[0].disabled) { 
                        select.remove(0); 
                    } 
                     
                    const option = document.createElement('option'); 
                    option.value = fileId; 
                    option.textContent = fileName; 
                    select.appendChild(option); 
                }); 
            } 
             
            // Ask question functionality 
            const askBtn = document.getElementById('ask-btn'); 
            const askResults = document.getElementById('ask-results'); 
             
            askBtn.addEventListener('click', async () => { 
                const question = document.getElementById('question').value.trim(); 
                const fileId = document.getElementById('file-select').value; 
                 
                if (!question) { 
                    showAlert('Please enter a question', 'danger', askResults); 
                    return; 
                } 
                 
                if (!fileId) { 
                    showAlert('Please select a PDF file', 'danger', askResults); 
                    return; 
                } 
                 
                try { 
                    askBtn.innerHTML = '<div class="loading"></div> Searching...'; 
                    askBtn.disabled = true; 
                    askResults.innerHTML = ''; 
                     
                    const formData = new FormData(); 
                    formData.append('question', question); 
                    formData.append('file_id', fileId); 
                     
                    const response = await fetch('/ask', { 
                        method: 'POST', 
                        body: formData 
                    }); 
                     
                    const data = await response.json(); 
                     
                    if (response.ok) { 
                        if (data.answers && data.answers.length) { 
                            data.answers.forEach((answer, index) => { 
                                const resultItem = document.createElement('div'); 
                                resultItem.className = 'result-item'; 
                                resultItem.innerHTML = ` 
                                    <div class="result-meta"> 
                                        <span>Similarity: ${(answer.similarity * 100).toFixed(1)}%</span> 
                                        <span>${answer.filename}</span> 
                                        <span>Source: ${answer.source}</span> 
                                    </div> 
                                    <div class="result-content"> 
                                        ${answer.text} 
                                    </div> 
                                `; 
                                resultItem.addEventListener('click', () => openModal(answer.text, { 
                                    filename: answer.filename, 
                                    similarity: `${(answer.similarity * 100).toFixed(1)}%`, 
                                    source: answer.source || 'document' 
                                })); 
                                askResults.appendChild(resultItem); 
                            }); 
                        } else { 
                            showAlert('No results found', 'warning', askResults); 
                        } 
                    } else { 
                        throw new Error(data.detail || 'Search failed'); 
                    } 
                } catch (error) { 
                    showAlert(error.message, 'danger', askResults); 
                } finally { 
                    askBtn.innerHTML = '<i class="fas fa-search"></i> Find Answer'; 
                    askBtn.disabled = false; 
                } 
            }); 
             
            // Dictionary functionality 
            const dictionaryBtn = document.getElementById('dictionary-btn'); 
            const dictionaryResults = document.getElementById('dictionary-results'); 
             
            dictionaryBtn.addEventListener('click', async () => { 
                const word = document.getElementById('dictionary-word').value.trim(); 
                 
                if (!word) { 
                    showAlert('Please enter a term to look up', 'danger', dictionaryResults); 
                    return; 
                } 
                 
                try { 
                    dictionaryBtn.innerHTML = '<div class="loading"></div> Searching...'; 
                    dictionaryBtn.disabled = true; 
                    dictionaryResults.innerHTML = ''; 
                     
                    const response = await fetch(`/dictionary/${encodeURIComponent(word)}`); 
                    const data = await response.json(); 
                     
                    if (response.ok) { 
                        const resultItem = document.createElement('div'); 
                        resultItem.className = 'result-item'; 
                         
                        let definitionsHTML = ''; 
                        if (data.definitions && data.definitions.length) { 
                            data.definitions.forEach((def, index) => { 
                                definitionsHTML += `<p><strong>${index + 1}.</strong> ${def}</p>`; 
                            }); 
                        } else { 
                            definitionsHTML = '<p>No definitions found.</p>'; 
                        } 
                         
                        resultItem.innerHTML = ` 
                            <h3 style="color: var(--primary); margin-bottom: 
1rem;">${data.word}</h3> 
                            <div style="margin-bottom: 0.5rem; color: #666; font-size: 0.9rem;"> 
                                Source: ${data.source} 
                            </div> 
                            <div class="definitions"> 
                                ${definitionsHTML} 
                            </div> 
                        `; 
                        dictionaryResults.appendChild(resultItem); 
                    } else { 
                        throw new Error(data.detail || 'Dictionary lookup failed'); 
                    } 
                } catch (error) { 
                    showAlert(error.message, 'danger', dictionaryResults); 
                } finally { 
                    dictionaryBtn.innerHTML = '<i class="fas fa-search"></i> Look Up'; 
                    dictionaryBtn.disabled = false; 
                } 
            }); 
             
            // Summarize functionality 
            const summarizeBtn = document.getElementById('summarize-btn'); 
            const summarizeResults = document.getElementById('summarize-results'); 
             
            summarizeBtn.addEventListener('click', async () => { 
                const fileId = document.getElementById('summarize-file-select').value; 
                 
                if (!fileId) { 
                    showAlert('Please select a PDF file', 'danger', summarizeResults); 
                    return; 
                } 
                 
                try { 
                    summarizeBtn.innerHTML = '<div class="loading"></div> Generating...'; 
                    summarizeBtn.disabled = true; 
                    summarizeResults.innerHTML = ''; 
                     
                    const response = await fetch(`/summarize/${encodeURIComponent(fileId)}`); 
                    const data = await response.json(); 
                     
                    if (response.ok) { 
                        const resultItem = document.createElement('div'); 
                        resultItem.className = 'result-item'; 
                        resultItem.innerHTML = ` 
                            <h3 style="color: var(--primary); margin-bottom: 1rem;">Document 
Summary - ${data.filename}</h3> 
                            <div class="result-content" style="white-space: pre-line; line-height: 
1.6;"> 
                                ${data.summary} 
                            </div> 
                        `; 
                        summarizeResults.appendChild(resultItem); 
                    } else { 
                        throw new Error(data.detail || 'Summary generation failed'); 
                    } 
                } catch (error) { 
                    showAlert(error.message, 'danger', summarizeResults); 
                } finally { 
                    summarizeBtn.innerHTML = '<i class="fas fa-scroll"></i> Generate Summary'; 
                    summarizeBtn.disabled = false; 
                } 
            }); 
             
            // Modal functionality 
            const modal = document.getElementById('result-modal'); 
            const closeModal = document.querySelector('.close-modal'); 
            const tabs = document.querySelectorAll('.tab'); 
            const tabContents = document.querySelectorAll('.tab-content'); 
             
            function openModal(content, metadata) { 
                document.getElementById('modal-content').innerHTML = `<div style="white
space: pre-line; line-height: 1.6;">${content}</div>`; 
                 
                let metadataHTML = '<ul style="list-style-type: none; padding: 0;">'; 
                for (const [key, value] of Object.entries(metadata)) { 
                    metadataHTML += `<li style="margin-bottom: 
0.5rem;"><strong>${key}:</strong> ${value}</li>`; 
                } 
                metadataHTML += '</ul>'; 
                 
                document.getElementById('modal-metadata').innerHTML = metadataHTML; 
                modal.classList.add('active'); 
                document.body.style.overflow = 'hidden'; 
            } 
             
            closeModal.addEventListener('click', () => { 
                modal.classList.remove('active'); 
                document.body.style.overflow = 'auto'; 
            }); 
             
            tabs.forEach(tab => { 
                tab.addEventListener('click', () => { 
                    tabs.forEach(t => t.classList.remove('active')); 
                    tabContents.forEach(tc => tc.classList.remove('active')); 
                     
                    tab.classList.add('active'); 
                    const tabId = tab.getAttribute('data-tab'); 
                    document.getElementById(`${tabId}-tab`).classList.add('active'); 
                }); 
            }); 
             
            window.addEventListener('click', (e) => { 
                if (e.target === modal) { 
                    modal.classList.remove('active'); 
                    document.body.style.overflow = 'auto'; 
                } 
            }); 
             
            // Helper function to show alerts 
            function showAlert(message, type, container = uploadStatus) { 
                const alert = document.createElement('div'); 
                alert.style.padding = '0.75rem 1rem'; 
                alert.style.borderRadius = '0.5rem'; 
                alert.style.marginTop = '1rem'; 
                alert.style.marginBottom = '1rem'; 
                 
                switch (type) { 
                    case 'success': 
                        alert.style.backgroundColor = 'rgba(0, 184, 148, 0.2)'; 
                        alert.style.border = '1px solid rgba(0, 184, 148, 0.3)'; 
                        alert.style.color = '#009d71'; 
                        break; 
                    case 'danger': 
                        alert.style.backgroundColor = 'rgba(214, 48, 49, 0.2)'; 
                        alert.style.border = '1px solid rgba(214, 48, 49, 0.3)'; 
                        alert.style.color = '#c92a2a'; 
                        break; 
                    case 'warning': 
                        alert.style.backgroundColor = 'rgba(253, 203, 110, 0.2)'; 
                        alert.style.border = '1px solid rgba(253, 203, 110, 0.3)'; 
                        alert.style.color = '#e67700'; 
                        break; 
                    default: 
                        alert.style.backgroundColor = 'rgba(108, 92, 231, 0.2)'; 
                        alert.style.border = '1px solid rgba(108, 92, 231, 0.3)'; 
                        alert.style.color = '#5f3dc4'; 
                } 
                 
                alert.textContent = message; 
                container.innerHTML = ''; 
                container.appendChild(alert); 
                 
                // Auto-dismiss after 5 seconds 
                setTimeout(() => { 
                    alert.style.opacity = '0'; 
                    alert.style.transition = 'opacity 0.5s ease'; 
                    setTimeout(() => { 
                        if (alert.parentNode) { 
                            alert.parentNode.removeChild(alert); 
                        } 
                    }, 500); 
                }, 5000); 
            } 
             
            // Initialize with upload tab active 
            document.querySelector('.nav-link.active').click(); 
        }); 
    </script> 
</body> 
</html> 
 